var pt=function(){var c={};var l={};var I="";var b=null;var f=625;var v=400;var p="";var a="";var F=null;var J={_counter:0,_uid:function(){return"h"+J._counter++},add:function(M,L,O){if(document.addEventListener){M.addEventListener(L,O,false)}else{if(document.attachEvent){if(J._find(M,L,O)!=-1){return}var P=function(T){if(!T){T=window.event}var S={_event:T,type:T.type,target:T.srcElement,currentTarget:M,relatedTarget:T.fromElement?T.fromElement:T.toElement,eventPhase:(T.srcElement==M)?2:3,clientX:T.clientX,clientY:T.clientY,screenX:T.screenX,screenY:T.screenY,altKey:T.altKey,ctrlKey:T.ctrlKey,shiftKey:T.shiftKey,keyCode:T.keyCode,origin:T.origin,data:T.data,stopPropagation:function(){this._event.cancelBubble=true},preventDefault:function(){this._event.returnValue=false}};if(Function.prototype.call){O.call(M,S)}else{M._currentHandler=O;M._currentHandler(S);M._currentHandler=null}};M.attachEvent("on"+L,P);var N={element:M,eventType:L,handler:O,wrappedHandler:P};var Q=M.document||M;var e=Q.parentWindow;var R=J._uid();if(!e._allHandlers){e._allHandlers={}}e._allHandlers[R]=N;if(!M._handlers){M._handlers=[]}M._handlers.push(R);if(!e._onunloadHandlerRegistered){e._onunloadHandlerRegistered=true;e.attachEvent("onunload",J._removeAllHandlers)}}}},remove:function(N,M,P){if(document.addEventListener){N.removeEventListener(M,P,false)}else{if(document.attachEvent){var L=J._find(N,M,P);if(L==-1){return}var R=N.document||N;var e=R.parentWindow;var Q=N._handlers[L];var O=e._allHandlers[Q];N.detachEvent("on"+M,O.wrappedHandler);N._handlers.splice(L,1);delete e._allHandlers[Q]}}},_find:function(N,e,S){var L=N._handlers;if(!L){return -1}var Q=N.document||N;var R=Q.parentWindow;for(var O=L.length-1;O>=0;O--){var M=L[O];var P=R._allHandlers[M];if(P.eventType==e&&P.handler==S){return O}}return -1},_removeAllHandlers:function(){var e=this;for(id in e._allHandlers){var L=e._allHandlers[id];L.element.detachEvent("on"+L.eventType,L.wrappedHandler);delete e._allHandlers[id]}},src:function(L){return L?L.target:event.srcElement},stopPropagation:function(L){L?L.stopPropagation():event.cancelBubble=true}};var j=function(L){var e=document.cookie.match(new RegExp("(^| )"+L+"=([^;]*)(;|$)"));return !e?"":decodeURIComponent(e[2])};var C=function(e,L,M){document.cookie=e+"=; expires=Mon, 26 Jul 1997 05:00:00 GMT; path="+(M?M:"/")+"; "+(L?("domain="+L+";"):"")};var m=function(L){var e=new Image();e.src=L};var z=function(M,L){if(Math.random()>(L||1)){return}var e=location.protocol+"//ui.ptlogin2.qq.com/cgi-bin/report?id="+M+"&v="+Math.random();m(e)};var d=function(e,L){c[e]=L};var A=function(e){c=e};var E=function(e,L){l[e]=L};var D=function(){var O=c.protocol||"http:";O+="//";var N=c.domain||"qq.com";if(c.protocol=="https:"&&N!="qq.com"&&N!="tenpay.com"){O="https://ssl."}I=O+"xui.ptlogin2."+N;a=I;var L=I+"/cgi-bin/xlogin?";var e="";for(var M in c){if(M=="protocol"||M=="domain"){continue}else{e+=(M+"="+encodeURIComponent(c[M])+"&")}}L+=e;return L};var u=function(L,e){if(!e){b=document.createElement("div");document.body.appendChild(b);var M="left:50%;";M+="top:50%;";M+="position:fixed;";M+="z-index:9999;";M+="background:none;";M+="_position:absolute;";M+="_top:expression(eval(document.documentElement.scrollTop+(document.documentElement.clientHeight-this.offsetHeight)/2));";M+="_margin-top:0px;";b.style.cssText=M}else{b=e}b.innerHTML='<iframe name="ui_ptlogin" id="ui_ptlogin" allowtransparency="true" scrolling="no" frameborder="0" width="100%" height="100%" style="top:0; left:0;'+(c.border_radius==1?"border-radius:5px;":"")+'" src="'+L+'">'};var g=function(e){var L=D();if(p){if(L==p){}else{document.getElementById("ui_ptlogin").src=L}}else{u(L,e);if(!-[1,]&&!window.XMLHttpRequest){o(f-1,v-1)}}p=L;y();b.style.display="block"};var r=function(){b.style.display="none";h()};var y=function(){var L=c.maskOpacity;if(L==0){return}if(!F){var e="background-color:#000;overflow:hidden;position:fixed;left:0;top:0;width:100%;height:100%;z-index:9998;opacity:"+L/100+";filter:alpha(opacity="+L+");";e+="_position:absolute;_height:expression(eval(document.documentElement.scrollTop+document.documentElement.clientHeight));_width:expression(eval(document.documentElement.scrollLeft+document.documentElement.clientWidth));";F=document.createElement("div");F.style.cssText=e;document.body.appendChild(F)}F.style.display="block"};var h=function(){F&&(F.style.display="none")};var o=function(M,e){var L=b;if(L&&M>1&&e>1&&(f!=M||v!=e)){if(typeof l.resize=="function"){l.resize(parseInt(M),parseInt(e))}else{L.style.width=M+"px";L.style.height=e+"px";L.style.marginLeft=-M/2+"px";L.style.marginTop=-e/2+"px"}}f=M;v=e};var x=function(){r();if(typeof l.close=="function"){l.close()}};var s=function(P){var M={};if(typeof JSON!=="undefined"){M=JSON.parse(P)}else{var e=/^[\],:{}\s]*$/,O=/(?:^|:|,)(?:\s*\[)+/g,L=/\\(?:["\\\/bfnrt]|u[\da-fA-F]{4})/g,N=/"[^"\\\r\n]*"|true|false|null|-?(?:\d+\.|)\d+(?:[eE][+-]?\d+|)/g;if(e.test(P.replace(L,"@").replace(N,"]").replace(O,""))){M=(new Function("return "+P))()}}return M};var t=function(){if(typeof window.postMessage!="undefined"){J.add(window,"message",function(L){var e=L.origin;if(e!=a){return}var M=s(L.data);switch(M.action){case"close":x();break;case"resize":o(M.width,M.height);break;default:break}})}else{navigator.ptlogin_callback=function(L){var e=s(L);switch(e.action){case"close":x();break;case"resize":o(e.width,e.height);break;default:break}}}};var G=function(){t();window.setTimeout(function(){z(447926,1)},1000)};var k="";var n="";var K=function(){n=location.hostname.match(/\w*\.(com|cn|com\.cn)$/);n=n?n[0]:"";k=location.hostname.match(/\w+(\.\w+)\.(com|cn|com\.cn)$/);k=k?k[0]:"";if(n!="qq.com"){k=n}};var B=function(L){var Q=j("pt4_token");var e=j("skey");var N=i(e);var M=j("ptcz");var P=i(M);var R=L?"qq.com":n;var O=((location.protocol=="https:")?"https://ssl.":"http://")+"ptlogin2."+R+"/logout?";O+=("pt4_token="+Q+"&pt4_hkey="+N+"&pt4_ptcz="+P+"&deep_logout=1");return O};var i=function(N){var M=0;for(var e=0,L=N.length;e<L;++e){M+=(M<<5)+N.charCodeAt(e)}return M&2147483647};var w=function(){C("uin",n);C("skey",n);C("p_uin",k);C("p_skey",k);C("p_luin",k);C("p_lskey",k);C("pt4_token",k);C("pt_mbkey",n);if(k!=""&&j("skey_m")!=""){C("uin_m",k);C("skey_m",k)}};var q=function(P,L){K();var O=j("pt4_token");var e=j("skey");var M=j("ptcz");var N=B(L);if(!O&&!e&&!M){}else{m(N)}window.setTimeout(function(){w();P&&P(2)},100)};var H=function(e){q(e,true)};G();return{showPtui:g,hidePtui:r,setParam:d,setParams:A,setCallback:E,logout:q,logoutQQCom:H}}();